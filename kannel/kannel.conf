# ---------------------------------------------------------
# CORE
# ---------------------------------------------------------
group = core
admin-port = 13000
smsbox-port = 13001
admin-password = bar
status-password = bar
log-file = "/var/log/kannel/kannel.log"
log-level = 0
box-allow-ip = "*.*.*.*"
admin-allow-ip = "*.*.*.*"
store-file = "/var/spool/kannel/kannel.store"

# ---------------------------------------------------------
# SMSC (FAKE OPERATOR)
# ---------------------------------------------------------
group = smsc
smsc = http
system-type = generic
smsc-id = FAKE
port = 13014
connect-allow-ip = "*.*.*.*"
smsc-username = user
smsc-password = pass
# Ces 3 lignes vont ICI (dans SMSC) et nulle part ailleurs
send-url = "http://localhost:13014/sendsms"
status-success-regex = ".*"
# Supprimer 'status-per-error-code' ici, car cela génère une erreur

# ---------------------------------------------------------
# SMSBOX (GESTION INTERNE)
# ---------------------------------------------------------
group = smsbox
bearerbox-host = 127.0.0.1
sendsms-port = 13013
global-sender = 12345
log-file = "/var/log/kannel/smsbox.log"
log-level = 0
# Rien d'autre ici dans la section smsbox. Assure-toi qu'il n'y ait pas de champs inutiles.

# ---------------------------------------------------------
# Configuration de l'utilisateur pour envoyer des SMS
# ---------------------------------------------------------
group = sendsms-user
username = "rapidpro"
password = "temba"
concatenation = true
max-messages = 10
user-allow-ip = "*.*.*.*"
faked-sender = 69262086  # Numéro fictif ou identifiant de l'expéditeur
forced-smsc = YOUR-SMSC  # Remplacer par le nom de ton SMSC ou service SMS
default-smsc = YOUR-SMSC # Idem

# ---------------------------------------------------------
# Configuration du service pour recevoir des SMS
# ---------------------------------------------------------
group = sms-service
keyword = default
get-url = "http://mailroom:8090/in/kannel/?id=%p&text=%a&to=%P&from=%p&smsc=%i"
max-messages = 0
concatenation = true

# Liste noire (blacklist)
blacklist = 12345, 123456

# Liste blanche (whitelist)
whitelist = 11111, 00000
